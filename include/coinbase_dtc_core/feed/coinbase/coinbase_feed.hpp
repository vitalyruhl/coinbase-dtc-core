#pragma once\n#include \"../exchange_feed.hpp\"\n#include <atomic>\n#include <thread>\n#include <mutex>\n#include <queue>\n\nnamespace coinbase_dtc_core {\nnamespace feed {\nnamespace coinbase {\n\n// Coinbase-specific implementation of ExchangeFeed\nclass CoinbaseFeed : public ExchangeFeed {\npublic:\n    CoinbaseFeed(const ExchangeConfig& config);\n    ~CoinbaseFeed() override;\n    \n    // Core interface implementation\n    bool connect() override;\n    void disconnect() override;\n    bool is_connected() const override;\n    \n    bool subscribe_trades(const std::string& symbol) override;\n    bool subscribe_level2(const std::string& symbol) override;\n    bool unsubscribe(const std::string& symbol) override;\n    bool subscribe_multiple_symbols(const std::vector<std::string>& symbols) override;\n    \n    // Coinbase-specific symbol mapping\n    std::string normalize_symbol(const std::string& coinbase_symbol) override;\n    std::string exchange_symbol(const std::string& normalized_symbol) override;\n    std::vector<std::string> get_available_symbols() override;\n    \n    // Status\n    std::string get_status() const override;\n    std::vector<std::string> get_subscribed_symbols() const override;\n    \nprivate:\n    // Coinbase-specific implementation details\n    void worker_loop();\n    void ping_loop();\n    \n    // WebSocket protocol\n    std::string create_subscribe_message(const std::string& channel, const std::string& product_id) const;\n    std::string create_unsubscribe_message(const std::string& product_id) const;\n    \n    // Symbol mapping tables\n    void initialize_symbol_mappings();\n    std::unordered_map<std::string, std::string> coinbase_to_normalized_;\n    std::unordered_map<std::string, std::string> normalized_to_coinbase_;\n    \n    // Connection state\n    std::atomic<bool> connected_;\n    std::atomic<bool> should_stop_;\n    int socket_;\n    \n    // Threading\n    std::thread worker_thread_;\n    std::thread ping_thread_;\n    \n    // Subscription management\n    mutable std::mutex subscriptions_mutex_;\n    std::vector<std::string> subscribed_symbols_;\n    \n    // Message queues\n    std::mutex send_queue_mutex_;\n    std::queue<std::string> send_queue_;\n    \n    // Statistics\n    std::atomic<uint64_t> messages_received_;\n    std::atomic<uint64_t> messages_sent_;\n    std::atomic<uint64_t> last_message_time_;\n    \n    // Socket utilities\n    void cleanup_socket();\n    uint64_t get_current_timestamp() const;\n};\n\n} // namespace coinbase\n} // namespace feed\n} // namespace coinbase_dtc_core"